function analyzeImageForBestPosition(imgData, width, height) {
  const cols = 6;
  const rows = 6;
  const blockWidth = Math.floor(width / cols);
  const blockHeight = Math.floor(height / rows);

  let bestBlock = { x: 0, y: 0 };
  let minContrast = Infinity;

  for (let row = 0; row < rows; row++) {
    for (let col = 0; col < cols; col++) {
      let totalContrast = 0;
      let count = 0;

      for (let y = 0; y < blockHeight - 1; y++) {
        for (let x = 0; x < blockWidth - 1; x++) {
          const px = (row * blockHeight + y) * width + (col * blockWidth + x);
          const i = px * 4;

          const r = imgData[i];
          const g = imgData[i + 1];
          const b = imgData[i + 2];
          const brightness = (r + g + b) / 3;

          const iRight = ((row * blockHeight + y) * width + (col * blockWidth + x + 1)) * 4;
          const r2 = imgData[iRight];
          const g2 = imgData[iRight + 1];
          const b2 = imgData[iRight + 2];
          const brightness2 = (r2 + g2 + b2) / 3;

          const diff = Math.abs(brightness - brightness2);
          totalContrast += diff;
          count++;
        }
      }

      const avgContrast = totalContrast / count;

      if (avgContrast < minContrast) {
        minContrast = avgContrast;
        bestBlock = { x: col, y: row };
      }
    }
  }

  const bestX = bestBlock.x * blockWidth + 20;
  const bestY = bestBlock.y * blockHeight + 40;
  const bestFontSize = Math.min(60, width / 20);
  return { x: bestX, y: bestY, fontSize: bestFontSize };
}
